define("fishstrap/ui/editor.js",function(t,e,n){var r=t("fishstrap/core/global.js");n.exports={fullEditor:function(t){var e={id:"",url:"/uedit/control"};for(var n in t)e[n]=t[n];var i=r.uniqueNum();r("#"+e.id).html('<script id="'+i+'" name="content" type="text/plain"></script>');var a=UE.getEditor(i,{serverUrl:e.url,autoHeightEnabled:!0});return{getContent:function(){return a.getContent()},setContent:function(t){a.ready(function(){a.setContent(t)})}}},simpleEditor:function(t){var e={id:"",url:"/uedit/control"};for(var n in t)e[n]=t[n];var i=r.uniqueNum();r("#"+e.id).html('<script id="'+i+'" name="content" type="text/plain"></script>');var a=UE.getEditor(i,{serverUrl:e.url,autoHeightEnabled:!0,toolbars:[["fullscreen","source","simpleupload"]]});return{getContent:function(){return a.getContent()},getFormatData:function(){var t=a.getContent(),e=r(t),n=[];return e.each(function(){var t=r(this);if(1==t.is("p")){var e=t.has("img"),i=t.text();e&&!i?t.find("img").each(function(){n.push({type:1,data:r(this).attr("src")})}):e&&i?(n.push({type:0,data:t.text()}),t.find("img").each(function(){n.push({type:1,data:r(this).attr("src")})})):n.push({type:0,data:t.text()})}else 1==t.is("img")&&n.push({type:1,data:t.attr("src")})}),n},setContent:function(t){a.ready(function(){a.setContent(t)})},setFormatData:function(t){var e="";for(var n in t){var r=t[n];0==r.type?e+="<p>"+r.data+"</p>":1==r.type&&(e+='<p><img src="'+r.data+'"/></p>')}a.ready(function(){a.setContent(e)})}}}}});