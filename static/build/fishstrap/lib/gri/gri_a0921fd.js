GRI=window.GRI||{},$=require("fishstrap/module/jquery.js"),GRI.Util={parse_url:function(t){var i,e,o,n,s={};if(void 0===t){var d=window.location;i=d.host,e=d.pathname,o=d.search.substr(1),n=d.hash}else{var a=t.match(/\w+:\/\/((?:[\w-]+\.)+\w+)(?:\:\d+)?(\/[^\?\\\"\'\|\:<>]*)?(?:\?([^\'\"\\<>#]*))?(?:#(\w+))?/i)||[];i=a[1],e=a[2],o=a[3],n=a[4]}return o&&function(){for(var t=o.split("&"),i=0,e=t.length;e>i;i++)if(-1!=t[i].indexOf("=")){var n=t[i].indexOf("="),d=t[i].slice(0,n),a=t[i].slice(n+1);s[d]=a}}(),{host:i,path:e,search:o,hash:n,param:s}},cookie:{getTopDomain:function(){var t=window.location.host,i={"com.cn":1,"net.cn":1,"gov.cn":1,"com.hk":1},e=t.split(".");return e.length>2&&function(){t=e.slice(i[e.slice(-2).join(".")]?-3:-2).join(".")}(),t},get:function(t){var i=document.cookie.match(new RegExp("(?:^|;\\s)"+t+"=(.*?)(?:;\\s|$)"));return i?i[1]:""},save:function(t,i,e){document.cookie=t+"="+i+";path=/;domain="+this.getTopDomain()+(e?";expires="+e:"")}},loading:{prefix:"mask4",show:function(t){if(t&&$("#"+this.prefix+t).length>0)return!1;var i=this,e=function(){return $("#"+t).length>0?{width:$("#"+t).width(),height:$("#"+t).height(),offset:$("#"+t).offset(),padding:$("#"+t).css("padding")}:null}();e&&$('<div id="'+i.prefix+t+'"><i class="icon-loading"></i>&nbsp;数据加载中...</div>').css({height:e.height+"px",left:e.offset.left+"px",position:"absolute",padding:e.padding,"padding-top":"25px",top:e.offset.top+"px","text-align":"center",width:e.width+"px",background:"#FFF",opacity:.4,"z-index":98}).appendTo("body")},clear:function(t){t&&$("#"+this.prefix+t).length>0?$("#"+this.prefix+t).remove():$('div[id^="'+this.prefix+'"]').each(function(){$(this).remove()})}},tool_tips:{show:function(t,i){var e='<div class="tips-small" style="display:none" > <p>'+t+"</p></div>",o=10,n=$(e);$("body").append(n);var s,d;$("#"+i).bind("mouseover",function(t){a(t),n.show().css({top:d,left:s})}).bind("mousemove",function(t){a(t),n.show().css({top:d,left:s})}).bind("mouseout",function(){n.hide()});var a=function(t){mouse=new r(t),s=mouse.x+o,d=mouse.y+o},r=function(t){this.x=t.pageX,this.y=t.pageY}}},mask:{self:"",create:function(){return this.self&&this.self.parent().length?void 0:($(window).bind("resize.overlay",this.resize),this.self=(this.self||$("<div></div>").css({height:"100%",left:0,position:"fixed",top:0,width:"100%",background:"#E8E9EE",opacity:.3,"z-index":777})).appendTo("body").css({width:this.width(),height:this.height()}))},destroy:function(){(!this.self||this.self.parent().length)&&($([document,window]).unbind("resize.overlay"),this.self.animate({opacity:"hide"},function(){$(this).remove().show()}))},height:function(){var t,i;return this.isIE6?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),i>t?$(window).height()+"px":t+"px"):$(document).height()+"px"},width:function(){var t,i;return this.isIE6?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),i>t?$(window).width()+"px":t+"px"):$(document).width()+"px"}}},GRI.Dialog=function(t,i){var e={type:1,title:"温馨提示",hideCloseIcon:!1,content:"",detail:"",tips:"",btnType:1,buttons:{text1:"",text2:""},winSize:1,extra:{top:"",left:"",width:"100%",zIndex:1001,heatmap:"",noPrompt:"",autoMask:!0,autoClose:!0}};!t.extra&&(t.extra=e.extra);var o=$.extend(!0,e,t),n=this;n.dialogId="";var s=function(){for(var t=o.extra,i=t.zIndex;$("#fwin_dialog_fs_100"+i)[0];)i++;var e="fs_100"+i,s="fwin_dialog_"+e,a=s+"_content",r=s+"_closeIcon",c=s+"_tips",l=s+"_btn1",h=s+"_btn2",f=s+"_btnCtn1";n.dialogId=s,n.btnId1=l,n.btnContainer1=f,t.heatmap&&(m="absolute");var p,u,m="fixed",v=o.tips,w=o.btnType,g={1:["确定","取消"],2:["是","否"],3:["确定",""],4:["继续",""],5:["",""]};6!=w?(w=g[w]?w:1,p=g[w][0],u=g[w][1]):(p=o.buttons.text1,u=o.buttons.text2);var x="";(v||p||u)&&(x='	<div class="float_footer"> ',x+='			<div class="form-message warning"> 				<div id="'+c+'" class=" help-inline">'+v+"</div> 			</div> ",(p||u)&&(x+='		<div class="float-footer"> ',p&&function(){var t='<input type="submit" id="'+l+'"  value="'+p+'"  class="btn-normal btn-middle"/> ';x+=t}(),u&&(x+='<input type="reset" id="'+h+'" value="'+u+'"  class="btn-thin btn-middle"/> '),x+="</div>"),x+="</div>");var b={1:"min",2:"mid"}[o.winSize]||"mid",I={1:"",2:"frm_cont",3:"confirm",4:"confirm",5:"confirm",6:"confirm"}[o.type]||"",y={3:"success",4:"attent",5:"warn",6:"error"}[o.type]||"",_=' <div id="'+s+'" style="position: '+m+"; z-index: "+i+'" class="float cf '+b+'">		<div class="float-header"> 			<h3><a id="'+r+'" href="javascript:void(0);" class="close">&times;</a>'+o.title+'</h3>		</div>		<div class="float-cont cf" style="background-color:#ffffff"> 			<div class="'+I+" "+y+'" id="'+a+'"> 			</div> 		</div> '+x+"	</div> ";$("#"+s)[0]||$(_).appendTo("body");var E=o.content;y&&(E="<h4>"+o.content+'<br><p class="success_info">'+(void 0==o.desc?"":o.desc)+"</p></h4> 			<p>"+o.detail+"</p>"),$("#"+a).html(E),$("#"+s).show(),$("#"+a).css({width:"100%"}),dialogLeft=t.left||($(window).width()-$("#"+s).width())/2,dialogTop=t.top||($(window).height()-$("#"+s).height())/2,$("#"+s).css({top:dialogTop+"px",left:dialogLeft+"px"}),$("#"+l).click(function(){d("btn1")}),$("#"+h).click(function(){d("btn2")}),$("#"+r).click(function(){d("btnClose")}),o.hideCloseIcon&&$("#"+r).css("display","none");var T=t&&"undefined"!=typeof t.noPrompt?t.noPrompt:!1;T&&$("#promptOff").html('<input type="checkbox" id="noDataPromptOff" name="noDataPromptOff" value="1" style="position:relative;top:2px;"/> 不再提醒 '),o.extra.autoMask&&GRI.Util.mask.create();var O="frm_100_"+s;$("#"+O)&&$("#"+O).remove(),hidIframe='<iframe id="'+O+'"></iframe>',$(hidIframe).appendTo("body"),i=parseInt(i),i--,$("#"+O).css({width:$("#"+s).width(),height:$("#"+s).height(),position:m,top:$("#"+s).css("top"),left:$("#"+s).css("left"),"z-index":i,scrolling:"no",border:"0"})},d=function(t){"btn1"==t&&i?function(){i($("#"+n.dialogId)),o.extra.autoClose&&n.hideWindows()}():n.hideWindows()};return this.hideWindows=function(){var t=n.dialogId;return $("#"+t).hide(),$("#"+t).remove(),$("#frm_100_"+t).remove(),$("div[id^='calendar_']")&&$("div[id^='calendar_']").css("display","none"),o.extra.autoMask&&GRI.Util.mask.destroy(),!1},this.closeWindows=this.hideWindows,this.showTips=function(t){var i=n.dialogId+"_tips";$("#"+i).html(t)},this.clearTips=function(){var t=n.dialogId+"_tips";$("#"+t).html("")},s(),this},GRI.Dialog.DIALOG_TYPE={COMMON:1,CONTROL:2,TEXT_INFO:3,TEXT_WARN:4,TEXT_WARN_RED:5,TEXT_ERROR:6},GRI.Dialog.BUTTON_TYPE={OK_CANCEL:1,YES_NO:2,OK:3,CONTINUE:4,NONE:5,CUSTOMIZE:6},GRI.Dialog.WIN_SIZE={MIN:1,MID:2},GRI.Exception={griErrorHandler:function(t){if(401===t.status){var i=window;window.top!=window.self&&(i=window.top),i.location.reload()}}},$.ajaxSetup({error:GRI.Exception.griErrorHandler});