define("fishstrap/core/global.js",function(require,exports,module){var $=require("fishstrap/module/jquery.js"),_=require("fishstrap/module/underscore.js");return $.format={intval:function(){var e=arguments[0]?arguments[0]:0,r=arguments[1]?arguments[1]:0,e=parseInt(e);return _.isNaN(e)&&(e=r),e},floatval:function(){var e=arguments[0]?arguments[0]:0,r=arguments[1]?arguments[1]:0,e=parseFloat(e);return _.isNaN(e)&&(e=r),e}},"object"!=typeof window.console&&(window.console={log:function(){},warn:function(){},error:function(){}}),$.console=window.console,$._ajax=$.ajax,$.ajax=function(e){var r=(new Date).getTime();e.url=-1==e.url.indexOf("?")?e.url+"?t="+r:e.url+"&t="+r,e.dataType="text",e.cache=!1,$._ajax(e)},function(){var e=1e4;$.uniqueNum=function(){e++;var r="id_"+e;return r}}(),$.security={htmlEncode:function(e){return $("<div/>").text(e).html()},urlEncode:function(e){return encodeURI(e)},jsEncode:function(e){return escape(e)}},function(){Date.prototype.format=function(e){var r={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var t in r)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?r[t]:("00"+r[t]).substr((""+r[t]).length)));return e},Date.parseByFormat=function(e,r){for(var t=r.match(/\d+/g),n=0;n!=t.length;++n)t[n]=parseInt(t[n]);var o={year:0,month:0,day:0,hour:0,minute:0,second:0},a={"y+":"year","M+":"month","d+":"day","h+":"hour","m+":"minute","s+":"second"};finder=[];for(var n in a){var i=e.match(n);null!=i&&finder.push({index:i.index,rule:a[n]})}finder.sort(function(e,r){return e.index-r.index});for(var n=0;n!=finder.length;++n){var s=finder[n];o[s.rule]=t[n]}return new Date(o.year,o.month-1,o.day,o.hour,o.minute,o.second)}}(),$.addCssToHead=function(e){try{var r=document.createStyleSheet();r.cssText=e}catch(t){var r=document.createElement("style");r.type="text/css",r.textContent=e,document.getElementsByTagName("HEAD").item(0).appendChild(r)}},function($){$.JSON={};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;$.JSON.stringify="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:function(e,r,t){var n;if(gap="",indent="","number"==typeof t)for(n=0;t>n;n+=1)indent+=" ";else"string"==typeof t&&(indent=t);if(rep=r,r&&"function"!=typeof r&&("object"!=typeof r||"number"!=typeof r.length))throw new Error("JSON.stringify");return str("",{"":e})},$.JSON.parse="object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse:function(text,reviver){function walk(e,r){var t,n,o=e[r];if(o&&"object"==typeof o)for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(n=walk(o,t),void 0!==n?o[t]=n:delete o[t]);return reviver.call(e,r,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}($),function(e){e.extend({os:{ios:!1,android:!1,version:!1}});var r=navigator.userAgent,t=r.match(/MicroMessenger\/([^\s]+)/),n=r.match(/QQ\/([^\s]+)/),o=r.match(/WebKit\/([\d.]+)/),a=r.match(/(Android)\s+([\d.]+)/),i=r.match(/(iPad).*OS\s([\d_]+)/),s=r.match(/(iPod).*OS\s([\d_]+)/),c=!s&&!i&&r.match(/(iPhone\sOS)\s([\d_]+)/),h=r.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=(h&&r.match(/TouchPad/),r.match(/Kindle\/([\d.]+)/),r.match(/Silk\/([\d._]+)/),r.match(/(BlackBerry).*Version\/([\d.]+)/),r.match(/MQQBrowser\/([\d.]+)/),r.match(/CriOS\/([\d.]+)/),r.match(/Opera\/([\d.]+)/)),f=(r.match(/Safari\/([\d.]+)/),r.match(/MSIE ([\d.]+)/)),d=r.match(/Gecko\/([\d.]+)/),u=r.match(/Opera\/([\d.]+)/),l=r.match(/Crosswalk\/([\d.]+)/),g=r.match(/Crossapi\/([\d.]+)/);d&&(e.os.gecko=!0,e.os.geckoversion=d[1]),o&&(e.os.webkit=!0,e.os.webkitversion=o[1]),f&&(e.os.ie=!0,e.os.ieversion=f[1]),u&&(e.os.opera=!0,e.os.operaversion=u[1]),l&&(e.os.crosswalk=!0,e.os.crosswalkversion=l[1]),g&&(e.os.crossapi=!0,e.os.crossapiversion=g[1]),a&&(e.os.android=!0,e.os.version=a[2]),c&&(e.os.ios=e.os.iphone=!0,e.os.version=c[2].replace(/_/g,".")),i&&(e.os.ios=e.os.ipad=!0,e.os.version=i[2].replace(/_/g,".")),s&&(e.os.ios=e.os.ipod=!0,e.os.version=s[2].replace(/_/g,".")),t&&(e.os.wx=!0,e.os.wxVersion=t[1]),n&&(e.os.qq=!0,e.os.qqVersion=n[1]),window.htmlEncode=function(e){return e.replace(/&/g,"&amp").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},window.htmlDecode=function(e){return e.replace(/&amp;/g,"&").replace(/&quot;/g,'/"').replace(/&lt;/g,"<").replace(/&gt;/g,">")},window.NETTYPE=0,window.NETTYPE_FAIL=-1,window.NETTYPE_WIFI=1,window.NETTYPE_EDGE=2,window.NETTYPE_3G=3,window.NETTYPE_DEFAULT=0,$.console.log($.JSON.stringify(e.os))}($),function(e){e.base64={is_unicode:!0,encode:function(e,r){("undefined"==typeof r||null==r)&&(r=this.is_unicode),r&&(e=this._u2a(e));var t,n,o,a,i,s="",c="",h="",u=0;do t=e.charCodeAt(u++),n=e.charCodeAt(u++),c=e.charCodeAt(u++),o=t>>2,a=(3&t)<<4|n>>4,i=(15&n)<<2|c>>6,h=63&c,isNaN(n)?i=h=64:isNaN(c)&&(h=64),s=s+this._keys.charAt(o)+this._keys.charAt(a)+this._keys.charAt(i)+this._keys.charAt(h),t=n=c="",o=a=i=h="";while(u<e.length);return s},decode:function(e,r){("undefined"==typeof r||null==r)&&(r=this.is_unicode);var t,n,o,a,i,s="",c="",h="",u=0;if(e.length%4!=0)return"";var f=/[^A-Za-z0-9\+\/\=]/g;if(f.exec(e))return"";do o=this._keys.indexOf(e.charAt(u++)),a=this._keys.indexOf(e.charAt(u++)),i=this._keys.indexOf(e.charAt(u++)),h=this._keys.indexOf(e.charAt(u++)),t=o<<2|a>>4,n=(15&a)<<4|i>>2,c=(3&i)<<6|h,s+=String.fromCharCode(t),64!=i&&(s+=String.fromCharCode(n)),64!=h&&(s+=String.fromCharCode(c)),t=n=c="",o=a=i=h="";while(u<e.length);return r&&(s=this._a2u(s)),s},_keys:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_u2a:function(e){for(var r=e.length,t="",n=0;r>n;n++){var o=e.charCodeAt(n);if(128>o)t+=String.fromCharCode(o);else if(2048>o){var a=255&o,i=o>>8&255;t+=String.fromCharCode(192|i<<2|a>>6&3),t+=String.fromCharCode(128|63&a)}else{var a=255&o,i=o>>8&255;t+=String.fromCharCode(224|i>>4),t+=String.fromCharCode(128|i<<2&60|a>>6&3),t+=String.fromCharCode(128|63&a)}}return t},_a2u:function(e){for(var r="",t=0,n=0,o=0,a=0;t<e.length;)n=e.charCodeAt(t),128>n?(r+=String.fromCharCode(n),t++):n>191&&224>n?(o=e.charCodeAt(t+1),r+=String.fromCharCode((31&n)<<6|63&o),t+=2):(o=e.charCodeAt(t+1),a=e.charCodeAt(t+2),r+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),t+=3);return r}}}($),function(e){e.algo={hashCode:function(e){var r=0;if(0==e.length)return r;for(i=0;i<e.length;i++)char=e.charCodeAt(i),r=(r<<5)-r+char,r&=r;return r}}}($),function(e){e.cookie=function(r,t,n){if("undefined"==typeof t){var o=null;if(document.cookie&&""!=document.cookie)for(var a=document.cookie.split(";"),i=0;i<a.length;i++){var s=jQuery.trim(a[i]);if(s.substring(0,r.length+1)==r+"="){o=e.JSON.parse(e.base64.decode(s.substring(r.length+1)));break}}return o}n=n||{},null===t&&(t="",n.expires=-1);var c="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var h;"number"==typeof n.expires?(h=new Date,h.setTime(h.getTime()+24*n.expires*60*60*1e3)):h=n.expires,c="; expires="+h.toUTCString()}var u=n.path?"; path="+n.path:"",f=n.domain?"; domain="+n.domain:"",d=n.secure?"; secure":"";document.cookie=[r,"=",e.base64.encode(e.JSON.stringify(t)),c,u,f,d].join("")}}($),function(e){function r(e){for(var r=e.split("&"),t=[],n=0;n!=r.length;++n)if(""!=r[n]){var o=r[n].split("=");2!=o.length?t[r[n]]=null:t[o[0]]=decodeURIComponent(o[1])}return t}function t(e){for(var r=e.split("/"),t=[],n=0;n!=r.length;++n)""!=r[n]&&t.push(r[n]);return t}function n(e){var r=[];for(var t in e)r.push(null==e[t]?e[t]:t+"="+encodeURIComponent(e[t]));return r.join("&")}function o(e){return e.join("/")}e.url={buildQueryUrl:function(e,r){for(var t in r)e+=-1==e.indexOf("?")?"?":"&",e+=t+"="+encodeURIComponent(r[t]);return encodeURI(e)},toInfo:function(e){if("string"!=typeof e)return console.error("$.url.toInfo not string!!"),console.error(e),{protocol:"",hostname:"",port:"",pathname:[],originpathname:"/",search:{},originsearch:"",hash:{},originhash:""};e=decodeURI(e);var a=/^(?:([a-zA-Z]+):\/\/)?([^?#\/:]*)?(?::([0-9]+))?(?:(\/[^?#]*))?(\?[^#]*)?(#.*)?$/,i=a.exec(e);if(!i)return{protocol:"",hostname:"",port:"",pathname:[],originpathname:"/",search:{},originsearch:"",hash:{},originhash:""};var s={protocol:i[1],hostname:i[2],port:i[3],pathname:i[4],search:i[5],hash:i[6]};return s.protocol||(s.protocol=""),s.hostname||(s.hostname=""),s.port||(s.port=""),s.pathname?(s.pathname=t(s.pathname),s.originpathname="/"+o(s.pathname)):(s.pathname=[],s.originpathname="/"),s.search?(s.search=r(s.search.substr(1)),s.originsearch="?"+n(s.search)):(s.search={},s.originsearch=""),s.hash?(s.hash=r(s.hash.substr(1)),s.originhash="#"+n(s.hash)):(s.hash={},s.originhash=""),s},fromInfo:function(e){var r="";return e.protocol&&e.hostname&&(r+=e.protocol+"://"+e.hostname),e.port&&(r+=":"+e.port),0!=e.pathname.length&&(r+="/"+o(e.pathname)),e.search&&(r+="?"+n(e.search)),e.hash&&(r+="#"+n(e.hash)),r}}}($),function(e){e.location={getSegment:function(r){var t=this.getUrl(),n=e.url.toInfo(t).pathname;return r>=n.length||0>r?null:n[r]},getQueryArgv:function(r){var t=this.getUrl(),n=e.url.toInfo(t).search;return n[r]?n[r]:null},getHashArgv:function(r){var t=this.getUrl(),n=e.url.toInfo(t).hash;return n[r]?n[r]:null},setHashArgv:function(e){var r="";for(var t in e)r+=t+"="+encodeURIComponent(e[t])+"&";window.location.hash="#"+encodeURI(r)},redirect:function(e){location.href=e},refresh:function(){history.go(0)},back:function(){history.go(-1)},getUrl:function(){if(arguments.length>=2)var e=arguments[1];else var e=window.location.href;return e}}}($),$});